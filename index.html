<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="timeago.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css"></link>
    <title>Twittler Clone</title>
  </head>
  <body>
    <h1>Recent Tweets<button class="new-tweets">Get new tweets</button></h1>
    <!-- <button class="new-tweets">Get new tweets</button> -->
    <div class="tweet-section"></div>
    <!-- $timestamp.text($.timeago(tweet.created_at)) -->
    <script>

      $(document).ready(function(){
        var $body = $('body');
        // $body.html('');
        // var index = streams.home.length - 1;
        // while(index >= 0){
        //   var tweet = streams.home[index];
        //   var $tweet = $('<div></div>');
        //   $tweet.text('@' + tweet.user + ': ' + tweet.message);
        //   $tweet.appendTo($body);
        //   index -= 1;
        // }
        // console.log(streams.home);
        function addTheseTweets(){
          $('div.tweet-section').text('');
          for(var i=0; i<streams.home.length; i++){
            buildTweet(streams.home[i]);
/*            var $tweetCard = $('<div class="tweet-card"></div>');
            var tweet = streams.home[i];
            var $tweet = $('<div class="tweet"></div>');
            var $timestamp = $('<div class="timestamp"></div>');
            // var $user = $();
            // var $message = $();
            $tweet.text('@'+ tweet.user + ': ' + tweet.message);
            // $timestamp.text($.timeago(tweet.created_at));
            $timestamp.text($.timeago(tweet.created_at.toISOString()));
            $tweet.appendTo($tweetCard);
            $timestamp.appendTo($tweetCard);
            $tweetCard.prependTo($('.tweet-section'));*/
            // console.log(tweet.created_at);
          }
        };
        function buildTweet(obj){
            var $tweetCard = $('<div class="tweet-card"></div>');
            var tweet = obj;
            var $tweet = $('<div class="tweet"></div>');
            var $timestamp = $('<div class="timestamp"></div>');
            // var $user = $();
            // var $message = $();
            $tweet.text('@'+ tweet.user + ': ' + tweet.message);
            // $timestamp.text($.timeago(tweet.created_at));
            $timestamp.text($.timeago(tweet.created_at.toISOString()));
            console.log(tweet.created_at.toISOString())
            $tweet.appendTo($tweetCard);
            $timestamp.appendTo($tweetCard);
            $tweetCard.prependTo($('.tweet-section'));
        };
        addTheseTweets();
        $('button.new-tweets').click(addTheseTweets);
      });
      
      //
      //
      //
      //
      //
      //
      //
      //
      //


    </script>
  </body>
</html>
